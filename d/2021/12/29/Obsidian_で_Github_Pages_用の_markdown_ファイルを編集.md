---
title: Obsidian / Github Pages 用の markdown ファイルを編集
aliases:
  - Obsidian / Github Pages 用の markdown ファイルを編集
tags:
  - d/2021/12/29
  - n/PGM/Markdown
---




諦め
================================================================================
そもそも諦めることがある。

- ※ 頑張りゃできることはわかってます。
- ※ いかに手間無く適当に運用しても大丈夫かどうかに主眼がある。
- ※ 調べて解決することすらめんどくさ。



Github Pages で使われる URL はフォルダとファイル名に従う
--------------------------------------------------------------------------------
`Jekyll` 用の `frontmatter` で permalink を指定することもできるのだが、この指定は `Obsidian` 上は認識しないので変更に追従できない。
こいつを毎回自力で書くのもウザいし構造変更に手動で追従させるのもキツいのでここはもう諦める。



準備
================================================================================
新たに `Github Pages` 管理用の `vault(保管庫)` を作る。そこに `public` というフォルダを作る。

そのフォルダに自分の Github Pages の内容を `git clone` する。




設定
================================================================================

作るリンク形式
--------------------------------------------------------------------------------
`Obsidian` は `markdown 形式` や、`wiki リンク形式` を最大限好意的に解釈してくれるのだが、`Jekyll` はそうでは無い。

設定で新規に作るリンクを `markdown 形式(wiki形式を使わない)` にし、ファイルに対する相対パスになるようにする。
相対パス指定で `public` よりも下の階層から下の階層にリンクを張るならそこには `public` 外のパスは入ってこない。

内部リンクの更新
--------------------------------------------------------------------------------
ノート名の変更や、フォルダ名の変更、移動に対してリンクを自動追跡して自動更新するようにする。

Folder Note Plugin のインストール
--------------------------------------------------------------------------------
`Folder Note` というフォルダ自体にノート的な機能を持たせる `Obsidian` の Plugin をインストールする。

この設定でフォルダ内部の `index.md` というファイルをそのフォルダのドキュメントとして認識させることができるようになる(設定する)。
`Github Pages` 上でも単にディレクトリに存在する `index.md` として認識され、こいつに対するリンクはディレクトリの `index.html` に対する同様の操作として行われる。



画像保存
--------------------------------------------------------------------------------
画像の保存をページと同一フォルダにする。








編集
================================================================================

ノートの新規作成
--------------------------------------------------------------------------------
普通に作る。URL とノート名の分離は諦めたので、これでよい。

下記の理由により問題が起こるので、名前にスペースを使わず、必要な場合はアンダースコアで対処する。


フォルダの作成
--------------------------------------------------------------------------------

普通に作る。そもそも `Git` がディレクトリ単体をコントロールできないので必ずセットで `index.md` を作ることになる。
これで `Folder Note` Plugin の機能で `Obsidian` 上ではこファイルがフォルダそのものとして機能する。

ノートの作成と同様に問題が起こるので、名前にスペースを使わず、必要な場合はアンダースコアで対処する。




ページへのリンク
--------------------------------------------------------------------------------
`Obsidian` では `fuga/pyio/hogehoge` というノートに対する markdown 形式のリンクは

```markdown
[hoge](fuga/piyo/hogehoge.md)
```

のように生成される。

この markdown は `Github Pages` の [jekyll-relative-links](https://github.com/benbalter/jekyll-relative-links) という Plugin の効果で `.md` の内部リンクが `.html` へ変換される。つまり `fuga/piyo/hogehoge.html` として `a` タグが生成される。

`Github Pages` は `fuga/piyo/hogehoge` か `fuga/piyo/hogehoge.html` のいずれでアクセスしても生成した HTML を出力してくれるので問題無く動作する。

しかし一部の処理に問題があるので注意が必要になる。
`Obsidian` はノートに対するリンクを生成する時、スペースを含む場合、それだけ urlencode してしまうようだ。
`fuga/piyo/hoge hoge.md` だった場合、これが `[hoge](fuga/piyo/hoge%20hoge.md)` このような形になる。

これは `Obsidian` の中ではリンクとして通用する。しかし `jekyll-relative-links` 側に問題があって、このような `%20` を含むようなリンクは、`HTML` への変換対象から外れてしまうようで、リンクが `.md` のままになってしまって変換されない。ファイル名(ノート名)だけでなく、パスの途中、つまりフォルダ名にスペースが含まれていても、`Jekyll` 側でうまくいかない。

`Osidian` が生成したリンクを書き変えて、`%20` から元のスペースに戻してしまえば `Github Pages` で正しく解釈される。そして `Obsidian` 上でもリンクとして機能する。しかし今度は `Obsidian` 上でのノート名の変更やフォルダ名の変更でそのリンクが対象外になってしまい変更が追従しなくなる。

ということで、回避できなさそうなので、そもそもノート名やフォルダ名にスペースを入れないという運用で逃げる。






ディレクトリへのリンク
--------------------------------------------------------------------------------
フォルダに対応する `index.md` に対してリンクする。
こうすることで `Obsidian` 上でリンクがフォルダを含む形で認識されるので、フォルダ名の変更にリンクが自動更新されるようになる。

`Github Pages` としては `index.md` へのリンクがディレクトリへのリンク(`index.html` へのリンク)とみなされて変換される。


画像の貼り付け
--------------------------------------------------------------------------------

普通にリンクすれば `Github Pages` 上も `img` タグとして挿入される


title 指定
--------------------------------------------------------------------------------
`title` をページ階層と関係なく指定する。基本的にページ階層に従うのだが、ページのタイトルとしてふさわしくなかったりとか、やたら長くなってしまう場合があるのでそのコンテキストを調整するために基本的に `frontmatter` で

```
---
title: hogehoge
---
```

このように書く。


`Obsidian` 自体はこの `title` は完全に無視する。


aliases 指定
--------------------------------------------------------------------------------
↑の `title` と同じ値を `aliases` を `frontmatter` に設定する。
これは `Obsidian` 側が解釈する値 で `Github Pages` は無視する。

`Obsidian` は対象のページタイトル(ファイル名)の別名として認識する。
なのでリンク生成の場合のページ名だけでなくこの指定した名前でもヒットするし、リンクの文字をこの名前で作ることができるようになる。リンク自体の URL は元のページ名がそのまま使われる。
なので Github Pages としても特に問題ない。

特に `Folder Note` を使ってフォルダのコンテンツを `index.md` としている場合、リンクがすべて `index` と生成されるのでわけわからなくなる。これを指定しておけば指定しておいたモノにできる。


文
--------------------------------------------------------------------------------
通常の markdown に従って書くが、句点(。)ごとに改行を入れる。
これで1行の長さが短くなるので `Git` で差分を見るのが楽になる。


数式を書く
--------------------------------------------------------------------------------
Obsidian は MathJax に対応しているのでそのように書けば解釈される。

Github Pages は karmdown は MathJax 対応しているし、テンプレートで MathJax をロードするように指定しておけば綺麗に表示される・・・ようだ。

















































