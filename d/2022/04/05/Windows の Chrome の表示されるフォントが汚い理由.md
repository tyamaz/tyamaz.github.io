---
title: Windows の Chrome の表示されるフォントが汚い理由
tags:
  - PGM/browser/Chrome
  - フォント
---

主に Mac に比べて汚いというやつ。

これは Windows が悪いというか、様々な状況が重なって、それが世界でもっとも使われているブラウザに結集してしまったという不幸が原因になる。

Windows 自体にはフォントを綺麗に表示する能力はある。


Windows が過去との互換性を非常に重視している問題
================================================================================
Windows は過去との互換性を非常に重視していて、20年前の OS 用に作られたアプリが普通に今の Windows10 でも何も手を加えないで動いたりする。Mac はそんなこと関係なく、数年のスパンで過去を切り捨てるので、ダメな部分を刷新できる。

当然そのアプリは20年前のフォント描画の仕組みで動いているわけで、Windows というのはそのような過去のしがらみの中で動いている。





Windows が Font Hinting を真面目に実装している問題
================================================================================
[フォントヒンティング \- Wikipedia](https://ja.wikipedia.org/wiki/%E3%83%95%E3%82%A9%E3%83%B3%E3%83%88%E3%83%92%E3%83%B3%E3%83%86%E3%82%A3%E3%83%B3%E3%82%B0)

Windows はこの「フォントヒンティング」という技術を真面目に実装しているようである。

これは定義されている文字の形状を小さなサイズで低解像度ディスプレイで見た場合にピクセル位置の関係でつぶれてしまわないように、付加された文字の図形的意味情報、形状特徴から字形を変形するという技術になる。

しかし、それにより元々の文字のバランスが崩れたり、文字がはっきり描画されることで逆にジャギー感が出たりと必ずしもよい方向に働かない場合もある。

そもそも現代では、ディスプレイの細かさが人間の目のレベルを超えてしまっており、ヒンティングによる変形が必要なくなっている。

このヒンティング情報は MS系 のフォントであるほど強く設定されていて、MS系だけあきらかに他のフォントと描画が違う独特のジャギー感(かすれ)と滑らかさが混在したものになっている。

このようなことがあるので、フォント自体を編集してヒンティング情報を除去するとフォントの描画が改善するという事例もある。

Mac や Linux はヒントなど使わず全方向にルールベースで縮小するのみである。


Windows のアンチエイリアスの方向性に偏りがある
================================================================================
ディスプレイというのは、ほとんどにおいて RGB の点が並んでいて、その3つのセットが1ピクセルを構成しそのセットがズラリと並んで画面を構成している。

当然3つのセットはバラバラに制御できるのだから、色の再現性に問題はあるとしても、特定の方向に対しては別の方向よりも高解像度となる。

例えば

```
RGBRGBRGBRGB
RGBRGBRGBRGB
RGBRGBRGBRGB
RGBRGBRGBRGB
```

このように並んでいたとすると、画としては 4x4 pixel であるが、横方向の粒は実際には縦方向の3倍あるのである。

これを利用すると、特定の方向はより滑らかにより形に忠実(1px以下の描画ができる)に再現できるということになる。一方の別の方向(例では縦方向)は解像感が悪く、↑のヒンティングによる変形の影響が大きく、アンチエイリアスの恩恵も少なくなるということである。

Windows は縦方向はヒンティングによりアンチエイリアスがそもそも必要無い状況にもっていってシャープ(文字ならば横棒がはっきりする)、横方向は3倍解像度を使って滑らかに(文字ならば縦棒の位置再現性が高い)という処理をやるっぽい。

その結果、1つの文字の中にアンチエイリアスが非常に効果的にかかっている部分とまったくかかってないシャープな部分が混在することになり全体の統一として、なんか「汚い」という印象になってしまうようだ。

Macはあまりそういうことを考えておらず、ディスプレイ性能に任せて縦横も同じようにピクセルベースの考え方でアンチエイリアスをかけているっぽい。



搭載されている游ゴシックのバリエーションが違う問題
================================================================================
Windowsd8 時代に、Mac にも Windows にも両方とも搭載されているフォント游ゴシックが現れ、これにより Windows側は高品質なフォントが無かったからダメだったんだという言い訳が通用しなくなった。Windows と Mac をイコールコンディションでの比較となってしまい、その結果やっぱり Windows の描画が明らかに汚いのでやっぱり Windows はクソだという印象に拍車をかけてしまった。

この 游ゴシック の描画が Windows のほうが Mac よりも明らかに細くてかすれているのである。なぜだ？

これは搭載されている游ゴシックのバリエーションが違ったためである。Mac には可読性の高い太め書体側だけが標準搭載だったのに対し、Windows は細い側も全部搭載したのだ。

ここで、Web でフォントのみを指定すると、Mac 側では可読性が高い太めが選択されて(それしか無いから)、Windows では Mac よりもやや細めが選択されてしまっていたのだ。おそらく Windows の挙動が正しく、Mac はそれが無いから単に太めが出ているだけなのだが、読みやすく綺麗なのは Mac なので Windows ダメだよねということになる。

さらに、この游ゴシックというフォント自体が別に最高な可読性を求めたフォントであるわけでもなく、さらに太さによって読みやすさが大きく変化するタイプのフォントであったことも Windows フォントが汚い評判を加速させた。




Windows 版の Chrome が游ゴシックをなんだか細く描画する
================================================================================
これは当時の Windows 版 Google Chrome のバグだったのかどうなのかわからんが、どういう経緯かわからんが、事実、游ゴシック が想定される太さよりもより細く描画されていたっぽい。

運が悪すぎるだろう。


じゃあ Windows はどうすればよいのか
================================================================================
游ゴシックという存在自体を完全に無かったことにして、もっと可読性高いフォント(MS系以外)を使えばいい。




