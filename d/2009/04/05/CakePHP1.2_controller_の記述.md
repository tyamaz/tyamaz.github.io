---
title: CakePHP1.2 controller の記述
aliases:
  - CakePHP1.2_controller_の記述
tags:
  - d/2009/04/05
  - n/PGM/PHP/CakePHP/v1.2/Controller
---


- 2009年04月05日
- CakePHP1.2.8
- PHP5.2.9


controllerの雛形
================================================================================
```php
<?php
class HogeController extends AppController
{
    function index()
    {
    }
}
?>
```

controller自体の共通の挙動項目
================================================================================
コントローラーの中で共通的に使う設定値をインスタンスの `public` メンバとして登録する。

コントローラー名
--------------------------------------------------------------------------------
Hoge コントローラーなら Hoge を登録しておくあまり意味はないけど互換性の問題？

```php
public $name = 'Hoge';
```

使用するmodel
--------------------------------------------------------------------------------
CakePHP1.2 では自動的に controller 名と対応する名前の model がインスタンス化されるが、ここで明示的に設定しなおすこともできるし追加することもできる

```php
public $uses = array("Piyo");
```

対応するviewを使う？
--------------------------------------------------------------------------------
この値を `true` にすると action に対応する view を自動的に action の後に呼び出します。

```php
public $autoRender = true;
```

`false` にしたらそこで処理は終了して出力を吐き出します。
ファイルダウンロードとかのテンプレートによる出力が必要ないときはここを `false` にすればいいでしょうね

レイアウト使う？
--------------------------------------------------------------------------------

```php
public $autoLayout = true;
```

レイアウトを指定する
--------------------------------------------------------------------------------
`views/layouts` 以下に設置した `base.ctp` のレイアウトを使いたいならこう

```php
public $layout = "base";
```


これらの項目を動的に変更する
--------------------------------------------------------------------------------
設定値は単なるインスタンス中の public なメンバなのでメソッド内で動的に変更することができる。
つまり最初に設定するのはざっくりとしたデフォルト値であってaction内でいかようにでもできるということ。

こんな感じで action 内でテンプレートの使用をやめることもできる。

```php
$this->autoRender = false;
```

共通設定の記述
================================================================================
設定する項目は多いにせよ、ほとんど同じ値を設定することが多いので共通的にやりたい。
一応全部のコントローラーは AppController を継承していることになっている・・・

そんでじゃあ AppController は何をしてるかというと・・・実装を見てみると

```php
class AppController extends Controller {
}
```

ってことで単に Controller クラスを継承しているだけでしたｗ
だから自分のところで勝手に AppController を作ってその中に共通設定を書いちゃってOK


