---
title: Git_逆引き
aliases:
  - Git_逆引き
tags:
  - d/2009/05/29
  - n/PGM/Git/v1.6
---

- 2009年05月28日
- Git 1.6


管理準備
================================================================================
リポジトリを新たに作る
--------------------------------------------------------------------------------
対象のディレクトリで

```
$ git init
```

そうすると対象のディレクトリ内に `.git` というディレクトリができる。このディレクトリの内部がリポジトリすべてとなる。

管理中
================================================================================
ワークツリーからインデックスにコミット候補を追加
--------------------------------------------------------------------------------
### ファイルを指定して追加

```
$ git add hoge.html
```

### 配下のすべてのファイルを追加

```
$ git add .
```

### 未管理のものを全部追加

```
$ git add -A
```

インデックスをリポジトリにコミットする
--------------------------------------------------------------------------------

```
$ git commit
```


過去にしたコミットを打ち消す
--------------------------------------------------------------------------------
詳しく書くと、過去にしたコミットを打ち消すような変更（ファイル追加のコミットを打ち消すならば、ファイル削除）をするコミットを作成し最新としてコミットし、インデックス、ワークツリーにもその状態を反映する。

これをするにはrevertコマンドを使う

```
$ git revert 77f2b24afa543cdb5fa5f81adbf5a2d991ed111d
```

注意としてはあくまで、打ち消し効果は特定のコミットであって、ワークツリーの状態が打ち消したコミットの直前のコミットまで戻るわけではない。つまり打ち消し対象のコミット以後に行った操作は保持される。

打ち消しのコミットは `HEAD` に対して行われるので、そこには今までの蓄積のスナップショットが入っているからね



ワークツリーのファイルを過去のコミットに巻き戻す
--------------------------------------------------------------------------------

### ワークツリーの特定のファイルを特定のコミットの状態に巻き戻す
```
$ git checkout 77f2b24afa543cdb5fa5f81adbf5a2d991ed111d hoge.html
```

開発中だと非常によくある動作ですね。

### ワークツリー全体を特定コミット状態に巻き戻す（挙動怪しい）
こんなことはあんまり無いと思いますが・・・一応やりかた。

`checkout` にオプション無しでコミット指定すると、そのコミットの状態に巻き戻ります。リポジトリは現状のままです。

```
$ git checkout 77f2b2
```

通常は checkout にはタグとかブランチを指定するのですが、リポジトリも指定可能です。こうすると現在のブランチ状態は `no branch` という状態になり、無名のブランチが巻き戻し状態を指している状態になります。この状態をHEADの分離状態というらしいですが・・・

ここでコミットすると、無名のブランチのまま勝手に枝分かれ先のコミットが作られます。
